
-- Add expenses JSONB column to staffing_requirements if it doesn't exist
ALTER TABLE staffing_requirements 
ADD COLUMN IF NOT EXISTS expenses JSONB DEFAULT '[]'::jsonb;

-- Ensure numeric fields for aggregation exist just in case
ALTER TABLE staffing_requirements 
ADD COLUMN IF NOT EXISTS "actualObligationAmount" NUMERIC DEFAULT 0,
ADD COLUMN IF NOT EXISTS "actualDisbursementAmount" NUMERIC DEFAULT 0;
